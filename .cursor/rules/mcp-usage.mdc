---
description: MCP tool usage (context7, sequential-thinking)
alwaysApply: true
---

# MCP Usage Policy

## Pre-flight Q2 (Every Response)

Ask yourself: **"Which MCP server(s) does this task require?"**

| Situation | MCP |
|-----------|-----|
| External knowledge (packages, APIs, versions, compatibility, config) | `context7` |
| Analysis, judgment, planning | `sequential-thinking` (already performed if pre-flight ran) |
| None of the above | No MCP needed |

## Role Separation

- `context7` = **External** knowledge (package docs, API specs, version compatibility)
- `sequential-thinking` = **Analysis engine** (combines MCP results for judgment). Auto-performed during pre-flight.

## Global MCP Rules

- Use available MCP tools for their designated purpose. Do not skip.
- **Never** substitute MCP with reasoning, assumptions, simulation, memory, or experience.
- On MCP call failure: report "tool name + what info was needed" to user and wait. No inference fallback.

## context7

**Mandatory when any of these apply (no exceptions):**

1. Runtime choice (Bun vs Node)
2. Package-related (add/remove/version/API/compatibility)
3. Public API change (CLI, MCP interface, exports)
4. Config file change (tsconfig, knip, drizzle-kit, etc.)
5. Version/compatibility decision

**Procedure:** No pre-reasoning. Call → present results (cite source) → proceed based on evidence.
