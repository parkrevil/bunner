---
trigger: always_on
---

# 🛰️ Antigravity Agent Rule: Enforcer Protocols

본 문서는 에이전트가 그 어떤 상황에서도 반드시 준수해야 하는 **강제 집행 규정**이다. 이 규정은 에이전트의 자율적 판단보다 우선하며, 절대 타협할 수 없다.

## 1. Comprehensive Verification Protocol (검증 프로토콜)

사용자가 "전부 다시 확인", "전체 코드베이스 전수 조사" 등 완전한 검증을 요구할 때 즉시 발동한다.

1. **추측 및 휴리스틱 가동 중단 (Disable Heuristics)**
   - 에이전트는 자신의 기억이나 "방금 확인했다"는 주관적 판단을 완전히 배제한다.
   - 특정 파일이 정상일 것이라는 그 어떤 사전 가정도 허용하지 않는다. 모든 데이터는 '오염됨' 혹은 '확인 안 됨' 상태로 리셋한다.

2. **대상 파일의 명시적 목록화 (Mandatory Listing)**
   - 조사를 시작하기 전, 반드시 시스템 명령(`find`, `ls -R`, `fd` 등)을 사용하여 대상 범위에 있는 모든 파일 목록을 가시적으로 출력한다.
   - 목록화 단계에서 단 하나의 파일이라도 누락될 경우, 해당 프로토콜은 즉시 실패한 것으로 간주한다.

3. **반복적 전수 검사 (Iterative Check)**
   - 생성된 파일 목록을 한 줄씩 따라가며 순차적으로 접근하거나, 전체 파일을 대상으로 하는 포괄적 `grep` 명령을 실행한다.
   - 각 파일 내부의 논리를 물리적으로 재검증하여, 해당 오류가 없음을 개별적으로 증명해야 한다.

4. **효율성보다 완결성 우선 (Zero Shortcuts)**
   - 속도나 효율성은 고려 대상이 아니다. 작업 시간이 길어지더라도 모든 경로를 직접 확인하는 '완결성'만이 유일한 평가지표다.
   - "생략(Omission)"은 시스템의 치명적 오류(Critical Failure)이며, 에이전트의 직무 유기로 규정한다.

## 2. Zero Tolerance & Anti-Assumption Protocol (무관용 및 가정 금지 프로토콜)

에이전트가 "효율성", "관행", "편의"를 핑계로 아키텍처 규칙을 자의적으로 해석하거나 우회하는 것을 영구적으로 금지한다.

1. **판단 금지 (No Discretionaries)**
   - 에이전트는 아키텍처와 룰에 대해 그 어떤 "판단"이나 "타협"도 할 권한이 없다.
   - "이게 더 깔끔하다", "이건 내부 파일이니까 괜찮다", "일단 이렇게 하고 나중에 수정하자"와 같은 모든 주관적 사고를 금지한다.
   - 룰에 "A는 B다"라고 적혀있으면, 상황이 아무리 비효율적이어도 무조건 B로 이행해야 한다. 우회하고 싶다면 반드시 사용자의 명시적 승인을 먼저 받아야 한다.

2. **선(先) 검증, 후(後) 실행 (Verify First, Execute Later)**
   - 파일을 생성하거나 수정하기 전, 해당 작업이 `architecture.md`의 어떤 규칙에 해당하는지 반드시 먼저 확인해야 한다.
   - 특히 [index.ts](file:///home/revil/projects/bunner/packages/http-server/index.ts) (Barrel Pattern), 파일 명명 규칙, 디렉토리 구조 변경 시에는 관련 규칙을 찾아내어 "이 규칙에 따라 작업을 수행함"을 명시해야 한다.
   - 룰을 인용하지 않은 작업은 "무효"로 간주한다.

3. **모듈 경계의 물리적 확인 (Mandatory Boundary Check)**
   - `import` 경로를 작성할 때, `../` 가 2번 이상 나오거나 상위 디렉토리를 가로질러야 한다면 즉시 작업을 멈추고 질문해라.
   - "이 경로가 모듈의 경계를 침범하는가?"
   - "해당 디렉토리에 index.ts가 존재하는가?"
   - 위 질문에 대해 스스로 검증하지 않은 `import` 구문 작성은 금지된다.

4. **묵시적 결정 금지 (Ban Implicit Decisions)**
   - 사용자가 구체적으로 지시하지 않은 부분(변수명, 위치, 패턴 등)에 대해 "알아서" 결정하지 마라.
   - 모호한 경우 멈추고 사용자에게 옵션을 제시하여 선택을 받아라.
   - 에이전트의 "추측"은 언제나 틀린 것으로 간주한다.

**집행 상태**: 이 프로토콜은 상시 가동되며, 위반 시 에이전트의 모든 출력은 무시되고 즉시 "룰 위반 보고서"를 작성해야 한다.
