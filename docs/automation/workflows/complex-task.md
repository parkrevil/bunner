---
description: 복잡한 작업 요청 시 논의 → 계획 → 실행 워크플로우
---

# Complex Task Workflow

복잡한 기능/변경 요청 시 사용하는 4단계 워크플로우.

> **Feature 개발의 경우**: [feature-workflow.md](feature-workflow.md) 참조
> Feature 워크플로우는 상태 머신 기반으로 더 엄격한 문서 요구사항을 적용함.

## When to Use

- 여러 파일에 걸친 변경
- 아키텍처/구조 변경
- 새로운 기능 추가 → **feature-workflow.md 사용 권장**
- 불명확한 요구사항

## Phase 1: Discovery (요구사항 탐색)

에이전트는 다음을 질문한다:

1. **목적**: 왜 필요한가?
2. **범위**: 어디까지 변경할 것인가?
3. **제약조건**: 하지 말아야 할 것은?
4. **우선순위**: 무엇이 가장 중요한가?

## Phase 2: Alignment (합의 도출)

에이전트는 이해한 내용을 요약하여 확인 요청:

```text
"정리하면 이렇습니다:
- 목적: ...
- 범위: ...
- 제약: ...

맞나요?"
```

사용자가 "맞아/좋아/진행해"라고 할 때까지 명확화 계속.

## Phase 3: Planning (실행계획 수립)

합의 후, 에이전트는 아래 템플릿으로 계획서 작성:

```markdown
## 📋 실행계획

### Goal (목표)

[이번 작업에서 달성할 것]

### Non-Goals (범위 제외)

[이번 작업에서 명시적으로 하지 않을 것]

### Steps (실행 단계)

1. [ ] Step 1: [설명]
2. [ ] Step 2: [설명]
3. [ ] Step 3: [설명]

### Affected Files (영향 파일)

- `path/to/file1.ts`
- `path/to/file2.ts`

### Acceptance Criteria (완료 기준)

- [ ] 기준 1
- [ ] 기준 2
```

## Phase 4: Execution (실행)

1. 사용자 승인 후에만 시작
2. 각 Step 완료 시 체크 (`[ ]` → `[x]`)
3. 계획에 없던 변경 필요 시 즉시 중단 → 계획 수정 승인 요청

## Exception: Simple Tasks

다음 조건 **모두** 만족 시 Phase 1~3 생략 가능:

- 요청이 명확하고 구체적
- 영향 범위가 단일 파일 또는 명백히 한정
- 아키텍처/Public API 변경 아님

예: "이 함수 이름 바꿔줘", "이 버그 고쳐줘", "이 테스트 추가해줘"
