## 🧩 Module System

Bunner는 `imports` 배열이나 복잡한 모듈 등록 절차를 완전히 제거한다. **파일 시스템이 곧 모듈 트리**가 되는 구조를 채택하여, AOT 컴파일러가 디렉토리를 스캔하고 의존성을 자동으로 연결한다.

### Key Philosophy & Features

- **Directory-Based Auto-Discovery (디렉토리 기반 자동 발견):**
  - 개발자가 모듈을 어디에 등록할 필요가 없다. 이 구조는 **사용자 관점의 모델**이다.
  - 파일 시스템 상의 **모듈 정의 파일(Module Definition File)**이 존재하는 디렉토리가 곧 모듈의 경계가 된다.
  - 이 파일이 존재하지 않는 일반 디렉토리의 컴포넌트들은 상위 모듈로 흡수된다.

- **Path-Based Identification (경로 기반 식별):**
  - 모듈의 유일성(Identity)은 물리적인 **파일 경로**에 의해 결정된다.
  - 여러 모듈에서 동일한 경로의 모듈을 참조하더라도, 컴파일러는 이를 단일 인스턴스로 식별하여 중복 생성을 원천 차단한다.

- **Zero-Config Wiring (설정 없는 연결):**
  - 다른 모듈의 기능을 사용하기 위해 별도의 등록 절차를 거칠 필요가 없다.
  - 언어 차원에서 제공하는 **표준 임포트(Import) 구문** 자체를 의존성 선언으로 간주한다. 컴파일러는 이 구문을 정적으로 분석하여 모듈 간의 의존성 그래프를 자동으로 구축한다.

- **Strict Visibility Control (엄격한 가시성 제어):**
  - 모듈 내부에서만 사용되어야 할 컴포넌트와 외부로 공개할 컴포넌트를 메타데이터를 통해 명확히 구분한다.
  - **Internal:** 내부 전용으로 설정된 컴포넌트를 외부 모듈에서 임포트하려고 시도하면, 런타임이 아닌 빌드 단계에서 즉시 에러를 발생시켜 아키텍처의 무결성을 강제한다.
  - **Normalized Path Key:** 모든 가시성 위반 판정의 식별자는 **정규화된 파일 경로(Normalized File Path)**를 기준으로 한다. Path Alias 등을 통한 우회를 허용하지 않는다.

### ⚙️ Adapter Configuration & Scoping

모듈 정의 파일은 단순한 마커 역할을 넘어, 해당 모듈 스코프 내에서 동작할 어댑터와 파이프라인을 제어하는 **중앙 설정소** 역할을 수행한다.

- **Module-Scoped Configuration (모듈 단위 설정):**
  - 각 모듈은 자신의 영역 내에서 활성화될 어댑터(HTTP, WebSocket 등)에 대해 독립적인 상세 설정을 가질 수 있다.
  - 미들웨어, 가드, 에러 필터 등의 파이프라인 구성 요소를 **어댑터별로 분리하여 등록**한다. 이를 통해 하나의 모듈 안에서도 HTTP 요청과 웹소켓 메시지에 대해 서로 다른 보안 정책이나 처리 로직을 적용할 수 있다.

- **Root-to-Global Propagation (전역 설정 전파):**
  - 애플리케이션의 진입점이 되는 **루트 모듈**에 정의된 어댑터 설정과 파이프라인은 애플리케이션 전체에 적용되는 **절대적인 전역 설정**으로 동작한다.
  - 하위 모듈들은 기본적으로 루트 모듈의 설정을 상속받으며, 필요에 따라 자신의 스코프 내에서만 유효한 설정을 추가하거나 오버라이딩하여 구체화한다.

### ⚙️ CLI - @bunner/cli

- **Recursive Scanner (재귀적 스캐너):**
  - 빌드 시점에 프로젝트의 전체 파일 시스템을 순회하며 모듈 정의 파일의 위치를 파악하고, 이를 기반으로 논리적인 모듈 트리를 구성한다.
  - 다른 모듈에서 참조되지 않더라도 독립적으로 실행되어야 하는 모듈(예: 크론 작업, 이벤트 리스너)을 이 단계에서 찾아내어, 누락 없이 애플리케이션에 포함시킨다.

- **Visibility Validator (가시성 검증기):**
  - 소스 코드의 `import` 구문을 분석할 때, 대상 컴포넌트의 가시성 설정(Internal/Export)을 확인한다. 규칙을 위반한 접근이 감지되면 컴파일을 중단하고 명확한 에러 메시지를 출력한다.

### 📐 Common - @bunner/common

- **Module Definition Helper (모듈 정의 헬퍼):**
  - 단순한 모듈의 경우 파일을 비워두거나 생략할 수 있도록 허용하며, 설정이 필요한 경우에만 메타데이터를 정의할 수 있는 헬퍼 함수를 제공한다.
  - 어댑터 설정, 프로바이더 등록, 전역 설정 오버라이딩 등 모듈 구성에 필요한 타입 정의와 스키마를 제공한다.
