## 🔮 AOT / AST

Bunner는 런타임 오버헤드를 제거하고, 애플리케이션의 구조적 무결성을 빌드 타임에 보장하기 위해 AOT(Ahead-Of-Time) 컴파일 전략을 핵심으로 채택한다. CLI는 런타임에 동적으로 해석되는 코드 대신, 실행 인프라가 이미 확정된 정적 코드를 생성한다.

### Key Philosophy & Features

- **Intelligence at Build Time (빌드 타임 지능):**
  - 프레임워크의 "지능"은 런타임이 아닌 빌드 단계에 집중된다.
  - 라우팅 테이블 구성, 의존성 주입 그래프 해결, 모듈 간 연결 등의 복잡한 연산은 모두 빌드 타임에 수행된다.
  - 런타임은 생성된 코드를 단순히 실행하는 역할만 수행하며, 어떠한 메타데이터 해석이나 동적 조립도 수행하지 않는다.

- **Deterministic Execution (결정론적 실행):**
  - 생성된 코드는 실행 경로가 명확히 확정된 상태이다.
  - 런타임에 발생할 수 있는 "모호한 상태"나 "예측 불가능한 동작"을 원천 차단한다.
  - 코드의 실행 흐름은 소스 코드만으로도 완벽하게 추적 가능해야 한다.

- **No Runtime Reflection (런타임 리플렉션 제거):**
  - `reflect-metadata`와 같은 런타임 리플렉션 도구를 사용하지 않는다.
  - 모든 메타데이터는 빌드 타임에 AST(Abstract Syntax Tree) 분석을 통해 추출되고, 필요한 실행 코드로 변환된다.
  - 이는 시작 성능(Cold Start)을 획기적으로 개선하고, 메모리 사용량을 최소화한다.

- **Static Analysis & Validation (정적 분석 및 검증):**
  - 컴파일러는 코드의 구조적 문제를 사전에 감지한다.
  - 순환 의존성, 잘못된 모듈 참조, 가시성 위반, 유효하지 않은 어댑터 설정 등을 빌드 타임 에러로 명확히 보고한다.
  - "실행해봐야 아는" 오류를 "작성하는 순간 아는" 오류로 전환한다.

### ⚙️ CLI - @bunner/cli

CLI는 Bunner의 컴파일러이자 정적 분석 엔진이다.

- **AST Parsing & Analysis:**
  - TypeScript 코드를 파싱하여 AST를 생성하고, 이를 분석하여 애플리케이션의 구조(모듈, 컨트롤러, 프로바이더 등)를 파악한다.
  - 데코레이터와 타입 정보를 정적으로 해석하여 프레임워크가 필요로 하는 메타데이터를 추출한다.

- **Execution Infrastructure Generation:**
  - 분석된 정보를 바탕으로 실행 가능한 인프라 코드를 생성한다.
  - **Manifest Generation:** 개발 및 배포 환경에 맞는 정적 매니페스트 파일을 생성한다.
  - **Wiring Code:** 모듈과 컴포넌트 간의 연결 코드를 생성한다.
  - **Bootstrap Code:** 어댑터 초기화 및 프레임워크 라이프사이클을 연결하는 부트스트랩 코드를 생성한다.
  - **Pipeline Compilation:** 미들웨어, 가드, 핸들러 등의 실행 흐름을 단일 함수 호출 체인으로 컴파일한다.

- **Optimized Try-Catch Injection:**
  - 에러 처리를 위한 `try-catch` 블록을 필요한 위치에 자동으로 주입한다.
  - 런타임 성능 저하를 최소화하면서도, 예외 발생 시 즉시 필터 체인으로 제어 흐름이 이동하도록 코드를 구성한다.

### 📐 Common - @bunner/common

AOT 컴파일러가 생성하는 코드와 런타임이 공유하는 정적 계약을 정의한다.

- **Manifest Schema:**
  - CLI가 생성하는 매니페스트 파일의 구조를 정의한다. 이 스키마는 컴파일러와 런타임 간의 통신 규약 역할을 한다.

- **Static Symbols & Markers:**
  - 컴파일러가 코드를 분석할 때 식별자로 사용하는 데코레이터와 마커들을 정의한다.
  - 이들은 런타임 로직을 포함하지 않으며, 오직 컴파일러에게 정보를 전달하는 용도로만 사용된다.

### 💎 Core - @bunner/core

Core는 AOT 컴파일러가 생성한 코드를 실행하는 최소한의 런타임 환경을 제공한다.

- **No Dynamic Logic:**
  - Core에는 동적 모듈 로딩, 런타임 의존성 해결 등의 로직이 존재하지 않는다.
  - 모든 연결과 구성은 이미 완료된 상태로 Core에 전달된다.

- **Execution Context Propagation:**
  - 컴파일러가 주입한 구조적 실행 컨텍스트 정보를 런타임에 유지하고 전파한다.
  - 에러 발생 시나 로그 출력 시, 이 정보를 통해 정확한 실행 위치와 경로를 파악할 수 있도록 돕는다.
